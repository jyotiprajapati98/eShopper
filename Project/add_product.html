<html>


      <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" >

   
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/js/bootstrap.min.js"></script>


    <script src="https://cdnjs.cloudflare.com/ajax/libs/axios/0.19.2/axios.js"></script>
    <link rel="stylesheet" href="css/mystyle.css">
  
    <nav class="navbar navbar-inverse navbar-expand-md bigBar" style=" 
     background-color: #212529">
        <div class="container-fluid">
          <div class="navbar-header">
            <a style="font-size: 18px; color: yellow;" class="navbar" >eShopper</a>
          </div>
          <ul class="navbar-nav mr-auto mt-2 mt-lg-0">
            <li class="nav-item">
                <a class="nav-link" href="home.html"> Home  </a></li>
           
            <li class="nav-item">
                <a class="nav-link"  href="add_product.html">Add Product</a></li>
            <li class="nav-item">
                <a class="nav-link" href="product_seller.html">Products</a></li>
            <li class="nav-item">
                <a class="nav-link"  href="orders.html">Orders</a></li>
          </ul>
          <ul class="navbar-nav navbar-right">
             <li class="nav-item">
                <a class="nav-link"  href="aboutus.html">About us</a></li>
            <script>

                      if(sessionStorage.getItem("user_role")!=null){
                                document.write(' <li class="nav-item"> <a class="nav-link"  href="logout.html">Logout</a></li> ');
                              }
                              else{
                                document.write(' <li class="nav-item"><a class="nav-link"  href="signup.html">Sign Up</a></li> <li class="nav-item"><a class="nav-link" href="login.html">Login</a>');
                      
                              }
                            </script>
                      
              <!-- <a class="nav-link dropdown-toggle" data-toggle="dropdown" href="#">Logout
              <span class="caret"></span></a>
              <ul class="dropdown-menu">
                <li><a style="color: rgb(122, 91, 91);" class="nav-link" href="login.html">As User</a></li>
                <li><a style="color: rgb(122, 91, 91);" class="nav-link" href="login.html">As admin</a></li>
              </ul> -->
            </li>
      
          </ul>
        </div>
      </nav>

<body>
    


   
    <main class="container-fluid">
        <div class="row my-4">
            <div class="col-sm-8 offset-sm-2">
           
             <h1 class="my-4">Add New Product</h1>  
             <hr>

            <form id="addhos" enctype="multipart/form-data">

<!-- 
                <div class="form-group row">
                <label class="col-sm-2 col-form-label">Product ID</label>
           
            <div class="col-sm-10">
                <input required placeholder="Product id" class="form-control"  type="number" id="pid" name="pid" /><br>
            </div> 
            </div>   
              -->


                <div class="form-group row">
                <label class="col-sm-2 col-form-label">Name</label>
                <div class="col-sm-10">
                    <input required placeholder="Product Name" class="form-control"  type="text" id="p_name" name="p_name" /><br>
                </div> 
                </div>   

                 
            <div class="form-group row">
                <label class="col-sm-2 col-form-label">Category</label>
                <div class="col-sm-10">

                    <!-- <input required placeholder="Product Name" class="form-control"  type="text" id="p_category" name="p_category" /><br> -->

                  <select required class="form-control" name="p_category" id="p_category">
                        <option selected="selected">Select</option>
                        <option >Electronics</option>
                        <option >Grossery</option>
                        <option >Cloths</option>
                        <option >Furniture</option>
                    </select><br>  
                                </div> 
                </div>
          
            
            <div class="form-group row">
                <label class="col-sm-2 col-form-label">Price</label>
                <div class="col-sm-10">
                    <input required placeholder="Price" class="form-control" type="number" id="p_price" name="p_price" /><br>
                </div> 
                </div>

                <div class="form-group row">
                <label class="col-sm-2 col-form-label">Image</label>
                <div class="col-sm-10">
                    <input required placeholder="Choose file" class="form-control" type="file" id="p_img" name="p_img" style="padding-bottom: 5px"/><br>
                </div> 
                </div>


                <div class="form-group row">
                    <label class="col-sm-2 col-form-label">Status</label>
                    <div class="col-sm-10">


                        <!-- <input required placeholder="Price" class="form-control" type="text" id="p_status" name="p_status" /><br> -->

                        <select required class="form-control" name="p_status" id="p_status">

                            <option selected="selected">Available</option>
                            <option>NotAvailable</option>
                            </select><br>   
                                    </div> 
                    </div>   
    
           
            <div class="form-group row">
                <label class="col-sm-2 col-form-label">Description</label>
                <div class="col-sm-10">
                    <textarea rows="5" placeholder="Product Description"  class="form-control" id="p_desc" name="p_desc"></textarea><br>
                </div> 
                </div>   

<!--             
            <div class="form-group row">
                <label class="col-sm-2 col-form-label">Image</label>
                <div class="col-sm-10">
                    <input placeholder="Attachment 1" class="form-control"  type="file" name="at1" />
                    <h6 style="color: springgreen;">upload image of product</h6><br>
                        </div> 
                </div>   
 -->

               
                        <button  id="addhosbtn" name="addhosbtn" class="btn btn-success btn-block">Submit</button>
                        <a class="inline btn btn-danger btn-block" href="add_product.html">Reset</a>    
                           
                       
                     
           
            </form>
            </div>
            </div>


</main>



<script>


const url = 'http://localhost:3000/products'

addhosbtn.onclick = function (e) {
  //debugger ;
  e.preventDefault();
  addUser();
};


function addUser() {
  var id = new Date().getTime();
  let sid = sessionStorage.getItem("user_id");
  let name = p_name.value;
  let category = p_category.value;
  let price = p_price.value;
  let status = p_status.value;
  let description = p_desc.value;
  let x = document.getElementById("p_img");
  
  if ('files' in x) {
    if (x.files.length == 0) {
      alert("Image not selected");
    } else {
      for (var i = 0; i < x.files.length; i++) {
        var file = x.files[i];
        if ('name' in file) {
          var img = file.name;
          img= "http://localhost/eShopper/Project/images/"+img;
        }
      }
    }
  } 
  else {
    if (x.value == "") {
      alert("Image not selected");
    } else {
      alert("The files property is not supported by your browser!");
      txt += "The files property is not supported by your browser!";
      txt  += "<br>The path of the selected file: " + x.value; 
    }
  }
  axios.post(url, {
    id,
    sid,
    name,
    category,
    price,
    status,
    description,
    img
  })
    .then(function () { alert("Record Inserted!") }).catch(function (er) { alert("Error!"); console.error(er) });
}


</script>




<!-- Footer -->
<div  class="footer">

    <!-- Footer Elements -->
    <div class="container">
  
      <!-- Call to action -->
      <ul class="list-unstyled list-inline text-center py-2">
        <li class="list-inline-item">
          <h5 class="mb-1">Register for free</h5>
        </li>
        <li class="list-inline-item">
          <a href="signup.html" class="btn btn-primary">Sign up!</a><br>
        </li>
      </ul>
      <!-- Call to action -->
  
    </div>
    <!-- Footer Elements -->
  
    <!-- Copyright -->
    <div class="footer">Â© 2020 Copyright:
      <a href="home.html">eShopper.com</a>
    </div>
    <!-- Copyright -->
  
  </div>
  <!-- Footer -->
       </div>
    </body>
 
</html>